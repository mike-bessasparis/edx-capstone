---
title: "Report"
output: html_notebook
---

```{r}

library(tidyverse)
library(readr)
library(ggthemes)
library(gridExtra)
library(kableExtra)
library(corrplot)

edx <- readRDS(file = "./rda/edx.rds")
validation <- readRDS (file = "./rda/Validation.rds")

small_edx <- edx[1:1000, ]

```

***
# Explore variables
```{r}

summary(edx)

head(edx)

```

## Response Variable: Rating
```{r}

summary(edx$rating)

```

```{r}

edx %>% ggplot(aes(x=rating)) +
  geom_histogram(binwidth = .5, col="grey") +
  scale_x_continuous(breaks = seq(0, 5, .5)) +
  theme_economist_white()

edx %>% ggplot(aes(x=rating)) +
  geom_histogram(binwidth = 1, col="grey") +
  theme_economist_white()


```
## Other interesting variables
```{r}

#Find number of unique movies rated, number of unique users, and number of movies in each genre.

mjb1 <- length(unique(edx$movieId))
mjb2 <- length(unique(edx$userId))

mjb3 <- edx %>% separate_rows(genres, sep = "\\|") %>% 
  group_by(genres) %>% 
  summarise(count = n()) %>% 
  arrange(-count)

mjb4 <- nrow(mjb3)

```
In the dataset there are: 

- `r mjb2` unique users
- `r mjb1` unique movies rated
- `r mjb4` unique movie genres

Movies grouped by genre.  Note that a movie may be tagged with several genres, e.g., the movie "Boomerang" is classified as both a "Comedy" and a "Romance."
```{r}

mjb3 %>% ggplot() +
  geom_col(aes(x = reorder(genres, -count), y = count)) +
  coord_flip() +
  xlab("Genre") +
  ylab("Number of Movies") +
  theme_economist_white() +
  theme(axis.text.y.left = element_text(hjust = 1),
        panel.grid.major = element_blank(),
        axis.ticks.y.left = element_line(),
        axis.ticks.x.bottom = element_blank())

```
What are the top 10 reviewed movies?
```{r}

edx %>% 
  group_by(title) %>% 
  summarise(count = n()) %>% 
  arrange(-count) %>% 
  top_n(10)

```
Who are the top 10 reviewers?
```{r}

edx %>% 
  group_by(userId) %>% 
  summarise(count = n()) %>% 
  arrange(-count) %>% 
  top_n(10)

```
***
# Correlations with Rating
No continuous numeric predictors to correlate with Rating; userId and movieId are discrete while timestamp is a date.

*** 
# Missing data, label encoding, and factorizing variables
## Missing data
First of all, I would like to see which variables contain missing values.
```{r}

NAcol <- which(colSums(is.na(edx)) > 0)

```
There are `r length(NAcol)` columns with at least one NA.

## Label encoding



## Factorizing variables
